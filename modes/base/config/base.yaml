#config_version=6

# Base mode that starts at the beginning of each ball
# and stops at the end of each ball.
#Â All persistent game-wide configuration and progress tracking :
# . Achievements and ball saves
# . Start/stop handlers for global mode and wizard modes
# . Lanes modes and combo multipliers
# . ...

mode:
  start_events: ball_starting
  stop_events: ball_will_end
  priority: 100

config:
  - base_bumpers.yaml
  - base_log.yaml
  - base_extraball.yaml
  - base_ramps_combo.yaml

event_player:
  mode_base_started:
    - start_mode_global
    - start_mode_skillshot
    - start_base_bumpers
    - start_base_log
  mode_base_will_stop:
    - stop_mode_global
    - stop_mode_skillshot
    - stop_base_bumpers
    - stop_base_log
  mode_type_wizard_started:
    - stop_mode_global
  mode_type_wizard_stopped{not mode["base"].stopping}:
    - start_mode_global
  #kickout_left_hit: start_mode_hurryup

variable_player:
  mode_base_started{is_extra_ball == False}:
    bumpers_score:
      int: 210
      action: set
    pf_multiplier:
      int: 1
      action: set
    bonus_multiplier:
      int: 1
      action: set

shots:
  kickout_left:
    switches: s_kickout

ball_saves:
  default:
    active_time: 10s
    hurry_up_time: 2s
    grace_period: 2s
    enable_events: mode_base_started
    timer_start_events: balldevice_bd_plunger_ball_eject_success
    auto_launch: yes
    balls_to_save: 1
    early_ball_save_events: s_outlane_left_active, s_outlane_right_active
    debug: yes

slide_player:
  priority: 100
  mode_base_started: base

# Hook to bd_trough jam - START
timers:
  bd_trough_jam:
    tick_interval: 3s
    control_events:
      - event: balldevice_bd_trough_ejecting_ball
        action: start
      - event: s_plunger_lane_active
        action: stop
      - event: ball_will_end
        action: stop

coil_player:
  timer_bd_trough_jam_tick{ticks > 0}: c_trough_eject
# Hook to bd_trough jam - END

timed_switches:
  flipper_right_cradle:
    switch_tags: right_flipper
    time: 3s
    events_when_active: auto_launch_plunger
    events_when_released: auto_launch_plunger_release